---
title: "bingdaopart"
output: html_document
---

Task2

In order to explore this dataset, we first need to select the variables related to our goal. Because we only examine the math scores in 1st grade in this project, we exclude some variables with information higher than first grade, and we keep some variables to do with kindergarten for the reason that the education in kindergarten inevitably affects performance of children in the first grade. To note that, we don't include all the variables to do with kindergarten. For some factors, for examples: whether the student qualified for free lunch in kindergarten; school type in kindergarten, highest degree of kindergarten teacher, teacher's career ladder level in kindergarten, etc, these things can hardly affect the performance of children in 1st grade. Compared with these factors in 1st grade, the influcen of these factors in kindergarten on first-grade chilidren can be negligible. Aiming to make a good summary to show an overview of this dataset, we narrow the 47 variables to these: "gender", "ethnicity", "birth", "stark", "star1", "star2", "star3", "readk", "read1", "read2", "read3", "mathk", "math1", "math2", "math3", "lunch1", "school1", "degree1", "ladder1", ("experience1"), "tethnicity1".  

```{r}
library(AER)
data("STAR")
#appendix
sapply(STAR,class)
sapply(STAR,summary)
```

We fist plot the histogram of "read" and "math". We only show the distribution of "read1" and "math1", others will be shown in appendix.
```{r}
par(mfrow=c(1,2),mar=c(4,4,1,0))
hist(STAR$read1, breaks=30 , xlim=c(400,700) , col=rgb(1,0,0,0.5) , xlab="grade of read1", main="")
hist(STAR$math1, breaks=30 , xlim=c(400,700) , col=rgb(0,0,1,0.5) , xlab="grade of math1", main="")


#appendix
# for k 
par(mfrow=c(1,2),mar=c(4,4,1,0))
hist(STAR$readk, breaks=30 , xlim=c(300,700) , col=rgb(1,0,0,0.5) , xlab="grade of readk", main="" )
hist(STAR$mathk, breaks=30 , xlim=c(300,700) , col=rgb(0,0,1,0.5) , xlab="grade of mathk", main="")
# for 2
par(mfrow=c(1,2),mar=c(4,4,1,0))
hist(STAR$read2, breaks=30 , xlim=c(400,800) , col=rgb(1,0,0,0.5) , xlab="grade of read2", main="" )
hist(STAR$math2, breaks=30 , xlim=c(400,800) , col=rgb(0,0,1,0.5) , xlab="grade of math2", main="")
#for 3
par(mfrow=c(1,2),mar=c(4,4,1,0))
hist(STAR$read2, breaks=30 , xlim=c(400,800) , col=rgb(1,0,0,0.5) , xlab="grade of read3", main="" )
hist(STAR$math2, breaks=30 , xlim=c(400,800) , col=rgb(0,0,1,0.5) , xlab="grade of math3", main="")
```


From the plot, with the higher grade, children's grade of read and math are closer. Then we will draw pie charts for qualitative variables to show its distribution. The pie chart of "star1" are shown in the following, others will be shown in appendix.
```{r}
library(RColorBrewer)
myPalette <- brewer.pal(6, "Set2") 

pie(table(STAR$star1), labels = c("regular","small","regular-with-aide"), border="white", col=myPalette )

#appendix
#for gender
pie(table(STAR$gender), labels = c("male","female"), border="white", col=myPalette )
#for ethnicity
pie(c(table(STAR$ethnicity)[[1]],table(STAR$ethnicity)[[2]],sum(table(STAR$ethnicity)[[3]]+table(STAR$ethnicity)[[4]]+table(STAR$ethnicity)[[5]]+table(STAR$ethnicity)[[6]])), labels = c("cauc", "afam", "other"), border="white", col=myPalette)
#for birth

#for stark
pie(table(STAR$stark), labels = c("regular","small","regular-with-aide"), border="white", col=myPalette )
#for star2
pie(table(STAR$star2), labels = c("regular","small","regular-with-aide"), border="white", col=myPalette )
#for star3
pie(table(STAR$star3), labels = c("regular","small","regular-with-aide"), border="white", col=myPalette )
#for lunch1
pie(table(STAR$lunch1), labels = c("non-free","free"), border="white", col=myPalette )
#for school1
pie(table(STAR$school1), labels = c("inner-city","suburban","rural", "urban"), border="white", col=myPalette )
#for degree1 
pie(table(STAR$degree1), labels = c("bachelor","master","specialist", "phd"), border="white", col=myPalette )
#for ladder1
pie(table(STAR$ladder1), labels = c("level1","level2","level3", "apprentice", "probation", "notladder"), border="white", col=myPalette )
#for tethnicity1
pie(table(STAR$tethnicity1), labels = c("cauc","afam"), border="white", col=myPalette )
```

Then we give the boxplots to show the relationships between STAR class type with the grade of read, and math respectively. We only show the boxplot of "star1" and "math1", and others will be shown in appendix.  

```{r}
library(ggplot2)
ggplot(na.omit(STAR), aes(x=star1, y=math1)) + 
    geom_boxplot(fill="slateblue", alpha=0.2) + 
    xlab("STAR type")

#appendix 
#star1 for read1
ggplot(na.omit(STAR), aes(x=star1, y=read1)) + 
    geom_boxplot(fill="slateblue", alpha=0.2) + 
    xlab("STAR type")
#stark for readk
ggplot(na.omit(STAR), aes(x=stark, y=readk)) + 
    geom_boxplot(fill="slateblue", alpha=0.2) + 
    xlab("STAR type")
#stark for mathk
ggplot(na.omit(STAR), aes(x=stark, y=mathk)) + 
    geom_boxplot(fill="slateblue", alpha=0.2) + 
    xlab("STAR type")
#star2 for read2
ggplot(na.omit(STAR), aes(x=star2, y=read2)) + 
    geom_boxplot(fill="slateblue", alpha=0.2) + 
    xlab("STAR type")
#star2 for math2
ggplot(na.omit(STAR), aes(x=star2, y=math2)) + 
    geom_boxplot(fill="slateblue", alpha=0.2) + 
    xlab("STAR type")
#star3 for read3
ggplot(na.omit(STAR), aes(x=star3, y=read3)) + 
    geom_boxplot(fill="slateblue", alpha=0.2) + 
    xlab("STAR type")
#star3 for read3
ggplot(na.omit(STAR), aes(x=star3, y=math3)) + 
    geom_boxplot(fill="slateblue", alpha=0.2) + 
    xlab("STAR type")
```

From the boxplot, we can see that children in small type class have a better performance in read and math compared with classes of other types, and with the higher grade, the grades of children in classes of different types are closer.  
Next, we will plot the boxplot of "math1" with other qualatative variables, to find out whether these factors affect math grade.

```{r}
library(ggplot2)
#gender
ggplot(na.omit(STAR), aes(x=gender, y=math1)) + 
    geom_boxplot(fill="slateblue", alpha=0.2) + 
    xlab("gender")
#ethnicity
ggplot(na.omit(STAR), aes(x=ethnicity, y=math1)) + 
    geom_boxplot(fill="slateblue", alpha=0.2) + 
    xlab("ethnicity")
#lunch1
ggplot(na.omit(STAR), aes(x=lunch1, y=math1)) + 
    geom_boxplot(fill="slateblue", alpha=0.2) + 
    xlab("lunch1")
#school1
ggplot(na.omit(STAR), aes(x=school1, y=math1)) + 
    geom_boxplot(fill="slateblue", alpha=0.2) + 
    xlab("school1")
#degree1
ggplot(na.omit(STAR), aes(x=degree1, y=math1)) + 
    geom_boxplot(fill="slateblue", alpha=0.2) + 
    xlab("degree1")
#ladder1
ggplot(na.omit(STAR), aes(x=ladder1, y=math1)) + 
    geom_boxplot(fill="slateblue", alpha=0.2) + 
    xlab("ladder1")
#tethnicity1
ggplot(na.omit(STAR), aes(x=tethnicity1, y=math1)) + 
    geom_boxplot(fill="slateblue", alpha=0.2) + 
    xlab("tethnicity1")
```

As we can see, gender and ladder type don't have much effect on math grade. However, for ethnicity, hispanic's teacher have the best teaching effect, and African-American teacher have the worst teaching effect. For lunch, children having non-free lunch have higher math grade. For school,children from urban scholl have the best grade and children form inner-city school have the lowest grade. For teachers' degree, specialist have the best teaching effect, and phd have the worst teaching effect. For teacher's ethnicity, Caucasian teacher have the better teaching effect than African-American teacher.